var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;import{c as r,a,r as i,b as l,g as c,i as p,m as u,d as m,o as f,e as d,f as g,h}from"./vendor.08c6e7a1.js";let y;const _={},b=function(e,t){if(!t)return e();if(void 0===y){const e=document.createElement("link").relList;y=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in _)return;_[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":y,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))},E=[{path:"/",name:"root",redirect:()=>({name:"/mlog/"})},{path:"/mlog/",name:"mlog",component:()=>b((()=>import("./index.f08036a4.js")),["/mlog/assets/index.f08036a4.js","/mlog/assets/index.fb998b82.css","/mlog/assets/song-list.b1010235.js","/mlog/assets/song-list.82c0d389.css","/mlog/assets/vendor.08c6e7a1.js"])},{path:"/mlog/playlist",name:"playlist",component:()=>b((()=>import("./playlist-detail.0de8fdc4.js")),["/mlog/assets/playlist-detail.0de8fdc4.js","/mlog/assets/playlist-detail.2eeb1d8f.css","/mlog/assets/song-list.b1010235.js","/mlog/assets/song-list.82c0d389.css","/mlog/assets/vendor.08c6e7a1.js"])},{path:"/mlog/song/:id",name:"play-song",component:()=>b((()=>import("./play-page.a984bf28.js")),["/mlog/assets/play-page.a984bf28.js","/mlog/assets/play-page.2777d495.css","/mlog/assets/vendor.08c6e7a1.js"])},{path:"/mlog/login",name:"login",component:()=>b((()=>import("./login.b1c948d1.js")),["/mlog/assets/login.b1c948d1.js","/mlog/assets/login.99ee0f06.css","/mlog/assets/vendor.08c6e7a1.js"])}],v=r({history:a(),routes:E,scrollBehavior:()=>({top:0})}),I={state:i({accountInfo:{},profileInfo:{},login:!1}),mutations:{setLoginState(e=!1){I.state.login=e},updateUserInfo(e={}){I.state.profileInfo=e}},getters:{getLoginUser:()=>({login:I.state.login,profile:I.state.profileInfo})}};l.defaults.withCredentials=!0;const O=l.create({baseURL:"https://music-api-chi.vercel.app",timeout:1e4});function L(e,t){const o=u(t);return O.get("/login/cellphone",{params:{phone:e,password:o,md5_password:o}})}function S(e){return"number"!=typeof e||e<1e5?e:(e=e.toString()).substr(0,e.length-4)+"."+e.substr(e.length-4,1)+"ä¸‡"}function j(e,t){localStorage.setItem(e,JSON.stringify(t))}function w(e,t={}){return JSON.parse(localStorage.getItem(e))||t}function P(e,t="/"){if(e)document.cookie=`${e}=0;expires=${(new Date).toUTCString()};path=${t}`;else{document.cookie.split(";").forEach((e=>{if(e){P(e.split("=")[0])}}))}}O.interceptors.response.use((function(e){return e.data}),(function(e){let r=c(e,"response.data");r=p(r)?r:{};const a=((e,r)=>{for(var a in r||(r={}))o.call(r,a)&&s(e,a,r[a]);if(t)for(var a of t(r))n.call(r,a)&&s(e,a,r[a]);return e})({message:e.message||e.statusText||e.stack,response:c(e,"response")},r);return Promise.reject(a)}));const k={name:"netMusic-App",setup(){!async function(){let e,t;try{let{data:o}=await O.get("/login/status");e=o.account,t=o.profile}catch(o){alert(o)}finally{e&&t?(I.mutations.setLoginState(!0),I.mutations.updateUserInfo(t)):(I.mutations.setLoginState(!1),P())}}()}},R={class:"mobile-container"};k.render=function(e,t,o,n,s,r){const a=m("router-view");return f(),d("div",R,[g(a)])};const T=h(k);T.use(v),v.isReady().then((function(){T.mount("#app")})).catch((e=>{console.error("mount routes error",e)}));export{I as a,P as c,w as g,O as i,L as l,j as s,S as t};
