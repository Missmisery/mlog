import{p as e,j as a,l,o,d as s,e as t,L as n,M as u,H as i,V as c,t as r,C as d,N as p}from"./vendor-acb1e622.js";import{l as v,s as m}from"./main-964e3682.js";import{c as f}from"./util-90d8b200.js";e("data-v-3de96e50");const g={class:"login-content"},b={class:"login-form",name:"login-form"},h={class:"login-phone-input"},y={class:"login-password-input"},w={class:"auto-login-box"},k={class:"al-box-wrap"},x=t("label",{for:"login-auto",class:"at-login"},"自动登录",-1),U=t("a",{href:"#",class:"fgt-pwd"},"忘记密码",-1),j={key:0,class:"error-tips"};a();const I={setup(e){const a=l(""),I=l(!0),V=l(""),C=l(""),L=l(!1);async function N(){try{L.value=!0,await function(){const e=/^1[3456789]\d{9}$/g;return new Promise(((a,l)=>{let o=V.value.toString();e.test(o)?C.value?a():l("请输入密码"):l("请输入正确的手机号")}))}(),I.value=!0,a.value=""}catch(e){a.value=e,I.value=!1}finally{I.value&&v(V.value,C.value).then((e=>{502===e.code||501===e.code?(a.value=e.message,I.value=!1):(m.commit("setUserInfo",e.profile),m.commit("setUserLogin",!0),H())})),L.value=!1}}const K=l(!0);function _(e){let a=parseInt(e.target.value);V.value=isNaN(a)?"":a}window.addEventListener("beforeunload",(function(){!1===K.value&&f()}));const E=p();function H(){E.push("/mlog/")}return(e,l)=>(o(),s("main",g,[t("form",b,[t("div",h,[n(t("input",{type:"tel",placeholder:"请输入手机号","onUpdate:modelValue":l[1]||(l[1]=e=>V.value=e),onInput:_,maxlength:"11"},null,544),[[u,V.value,void 0,{trim:!0}]])]),t("div",y,[n(t("input",{type:"password",autocomplete:"",placeholder:"请输入密码","onUpdate:modelValue":l[2]||(l[2]=e=>C.value=e),onKeypress:i(N,["enter"])},null,40,["onKeypress"]),[[u,C.value,void 0,{trim:!0}]])]),t("div",w,[t("div",k,[n(t("input",{type:"checkbox",name:"autologin",id:"login-auto","onUpdate:modelValue":l[3]||(l[3]=e=>K.value=e)},null,512),[[c,K.value]]),x]),U,I.value?d("",!0):(o(),s("p",j,r(a.value),1))]),t("button",{type:"button",onClick:N,disabled:L.value,class:{"dis-btn":L.value}}," 登录 ",10,["disabled"]),t("p",{class:"back-home"},[t("a",{href:"#",onClick:H},"< 返回首页")])])]))},__scopeId:"data-v-3de96e50"};export{I as default};
